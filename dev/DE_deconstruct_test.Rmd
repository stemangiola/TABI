---
title: "Testing model deconstruction"
output: html_notebook
---


```{r setup}
devtools::load_all(".")
library(rstan)
library(here)
library(shinystan)
library(tidyverse)
rstan_options(auto_write = TRUE)
options(mc.cores = parallel::detectCores())
```

```{r}
model = stan_model(file = here("dev","DE_sigmoid_deconstruct.stan"))
```


```{r}
data = full_simulator(10,30,horseshoe_hyperprior_params(20), default_intercept_params(0.5, 0.3), sigmoid_link_params(4,2), normal_likelihood_params(0.1))

plot_simulated(data)

fit <- sampling(model, data = data$observed, control = list(adapt_delta = 0.9))

evaluation_summary(rstan::extract(fit),true_params = data$true)
```




